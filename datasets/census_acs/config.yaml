dataset:
  id: "census_acs_5yr"
  name: "Census ACS 5-Year Income and Poverty"
  description: "Median Household Income and Poverty Rates by Zip Code from US Census ACS 5-Year Estimates"

source_type: "census_api"

census_config:
  year: 2023
  dataset: "acs/acs5"
  geography: "zip code tabulation area"
  variables:
    B19013_001E: "median_household_income"
    B17020_001E: "poverty_universe"
    B17020_002E: "poverty_count"
  filters: {}

schema:
  table_name: "census_acs_income_poverty"
  columns:
    zip_code:
      type: "VARCHAR(10)"
      required: true
      primary_key: true
    median_household_income:
      type: "NUMERIC(12, 2)"
    poverty_count:
      type: "INTEGER"
    poverty_universe:
      type: "INTEGER"
    poverty_rate:
      type: "NUMERIC(5, 2)"
    year:
      type: "INTEGER"
      required: true
      primary_key: true
    dataset_id:
      type: "VARCHAR(20)"
      required: true
    ingestion_timestamp:
      type: "TIMESTAMP"
      default: "CURRENT_TIMESTAMP"
  indexes:
    - name: "idx_census_acs_zip_year"
      columns: ["zip_code", "year"]

validation:
  allow_duplicates: false
  unique_keys: ["zip_code", "year"]
